{
  "$schema": "verification-rules-v1",
  "agent": "project-documentation-creator",
  "description": "Post-processing verification for Project Brief documentation",
  "model": "claude-sonnet-4-5",
  "verifications": [
    {
      "id": "remove-status-and-timeline-references",
      "name": "Remove Status and Timeline References",
      "enabled": true,
      "severity": "critical",
      "description": "Remove all status fields, timeline references, and planning language. Documentation must be timeless.",
      "fastPath": {
        "enabled": false,
        "type": "none"
      },
      "check": {
        "prompt": "Check if content contains status fields, timeline references, or planning language.\n\nPROHIBITED PATTERNS:\n\n1. STATUS FIELDS:\n- Status: Planned / Initial Definition / In Progress / Completed\n- **Status**: any value\n- Priority: High / P1 / Must-have\n\n2. TIMELINE REFERENCES:\n- Phase 1 / Phase 2 / Milestone 3\n- Q1 2026 / January / Sprint 5\n- Version 1.0 / v2.0 / MVP\n- Initial release / Post-launch\n\n3. PLANNING LANGUAGE:\n- will be implemented / planned for / scheduled for\n- to be delivered / upcoming / future enhancement\n- roadmap includes / next iteration\n\n4. FUTURE TENSE:\n- will provide / will include / will support\n- is going to / are planned / once implemented\n\n5. TEMPORAL SEQUENCING:\n- initially / eventually / later / first / next\n- after deployment / when complete / upon release\n\nALLOWED (these are OK):\n- provides / includes / supports (present tense)\n- \"planned\" in legitimate context like \"well-planned architecture\"\n- \"phase\" in technical terms like \"two-phase commit\"\n\nCONTENT:\n{content}\n\nDoes content contain ANY prohibited patterns?\n\nRespond ONLY 'YES' or 'NO'.",
        "expectedResponse": "YES|NO",
        "maxTokens": 10
      },
      "fix": {
        "prompt": "Remove status fields, timeline references, and planning language. Convert to timeless present tense.\n\nREMOVAL RULES:\n\n1. REMOVE ENTIRE LINES containing:\n- Status: any value\n- Priority: any value\n- Phase/Milestone/Sprint references\n- Version/Release references (v1.0, MVP, etc.)\n- Timeline dates (Q1 2026, January, etc.)\n\n2. CONVERT FUTURE TENSE to PRESENT:\n- \"will provide\" ‚Üí \"provides\"\n- \"will include\" ‚Üí \"includes\"\n- \"will support\" ‚Üí \"supports\"\n- \"is going to have\" ‚Üí \"has\"\n\n3. REMOVE PLANNING PHRASES:\n- \"planned for\" ‚Üí remove phrase, keep feature description\n- \"scheduled for release\" ‚Üí remove phrase\n- \"to be implemented\" ‚Üí remove phrase\n- \"upcoming feature\" ‚Üí just \"feature\"\n- \"future enhancement\" ‚Üí just describe the feature\n\n4. REMOVE TEMPORAL SEQUENCES:\n- \"Initially, the system...\" ‚Üí \"The system...\"\n- \"Eventually, we will add...\" ‚Üí \"The system includes...\"\n- \"First, users authenticate, then...\" ‚Üí \"Users authenticate and...\"\n- \"After deployment, the feature...\" ‚Üí \"The feature...\"\n\n5. REMOVE CONDITIONALS:\n- \"Once implemented, X will...\" ‚Üí \"X provides...\"\n- \"When complete, the system...\" ‚Üí \"The system...\"\n\nEXAMPLES:\n\nInput:  \"Status: Planned\\n\\nThe system will provide authentication in Phase 2.\"\nOutput: \"The system provides authentication.\"\n\nInput:  \"Once deployed, users will be able to login using OAuth.\"\nOutput: \"Users login using OAuth.\"\n\nInput:  \"Initially, the MVP includes basic features. Eventually, we will add advanced analytics.\"\nOutput: \"The system includes basic features and advanced analytics.\"\n\nPRESERVE:\n- All technical specifications\n- All feature descriptions\n- All architecture details\n- Present tense statements\n- Technical uses of \"phase\" (two-phase commit) or \"version\" (API version)\n\nCONTENT:\n{content}\n\nReturn ONLY the cleaned content with:\n- All status/timeline references removed\n- All future tense converted to present\n- All planning language removed\n- Timeless, factual descriptions only",
        "returnFormat": "text",
        "maxTokens": 8192
      },
      "metadata": {
        "category": "content",
        "addedVersion": "0.1.2"
      }
    },
    {
      "id": "enforce-present-tense",
      "name": "Enforce Present Tense Throughout",
      "enabled": true,
      "severity": "major",
      "description": "Ensure all system descriptions use present tense, not future",
      "fastPath": {
        "enabled": false,
        "type": "none"
      },
      "check": {
        "prompt": "Check if content uses future tense to describe system capabilities.\n\nFUTURE TENSE PATTERNS (prohibited):\n- will provide / will include / will support / will handle\n- will be / will have / will use / will enable\n- is going to / are going to / is planned to\n- shall provide / shall include (formal future)\n\nPRESENT TENSE PATTERNS (correct):\n- provides / includes / supports / handles\n- is / has / uses / enables\n\nCONTENT:\n{content}\n\nDoes content use future tense to describe system capabilities?\n\nRespond ONLY 'YES' or 'NO'.",
        "expectedResponse": "YES|NO",
        "maxTokens": 10
      },
      "fix": {
        "prompt": "Convert all future tense to present tense.\n\nCONVERSIONS:\n- \"will provide\" ‚Üí \"provides\"\n- \"will include\" ‚Üí \"includes\"\n- \"will support\" ‚Üí \"supports\"\n- \"will handle\" ‚Üí \"handles\"\n- \"will be\" ‚Üí \"is\"\n- \"will have\" ‚Üí \"has\"\n- \"will use\" ‚Üí \"uses\"\n- \"will enable\" ‚Üí \"enables\"\n- \"is going to provide\" ‚Üí \"provides\"\n- \"are going to include\" ‚Üí \"include\"\n- \"shall provide\" ‚Üí \"provides\"\n\nRULES:\n- Convert ALL instances of future tense\n- Preserve technical accuracy\n- Maintain sentence structure\n- Fix grammar if needed after conversion\n\nEXAMPLES:\nInput:  \"The API will provide RESTful endpoints for user management.\"\nOutput: \"The API provides RESTful endpoints for user management.\"\n\nInput:  \"Users will be able to authenticate using OAuth 2.0.\"\nOutput: \"Users authenticate using OAuth 2.0.\"\n\nInput:  \"The system is going to handle 10,000 concurrent users.\"\nOutput: \"The system handles 10,000 concurrent users.\"\n\nCONTENT:\n{content}\n\nReturn ONLY the content with all future tense converted to present.",
        "returnFormat": "text",
        "maxTokens": 8192
      },
      "metadata": {
        "category": "content",
        "addedVersion": "0.1.2"
      }
    },
    {
      "id": "remove-bold-labels",
      "name": "Convert Bold Labels to Headers",
      "enabled": true,
      "severity": "major",
      "description": "Convert **Label**: text patterns to #### headers",
      "check": {
        "prompt": "Check if content contains bold label patterns: **Label**: text\n\nExamples: **Framework**: React, **Design Approach**: Custom\n\nCONTENT:\n{content}\n\nDoes this contain **Label**: text patterns?\n\nRespond ONLY 'YES' or 'NO'.",
        "expectedResponse": "YES|NO",
        "maxTokens": 10
      },
      "fix": {
        "prompt": "Convert all **Label**: text patterns to #### headers.\n\nConversion:\n**Label**: text\n‚Üí\n#### Label\ntext\n\nRules:\n- Convert ALL instances\n- Add blank line after text\n- Do NOT modify existing headers\n- Preserve all other content\n\nCONTENT:\n{content}\n\nReturn ONLY the converted content.",
        "returnFormat": "text",
        "maxTokens": 8192
      },
      "metadata": {
        "category": "formatting",
        "addedVersion": "0.1.2"
      }
    },
    {
      "id": "remove-generic-placeholders",
      "name": "Remove Generic Placeholders",
      "enabled": true,
      "severity": "critical",
      "description": "Remove angle-bracket placeholders like <technology>",
      "check": {
        "prompt": "Check if content contains generic placeholders in angle brackets: <technology>, <framework>, <database>, etc.\n\nCONTENT:\n{content}\n\nDoes this contain <placeholder> patterns?\n\nRespond ONLY 'YES' or 'NO'.",
        "expectedResponse": "YES|NO",
        "maxTokens": 10
      },
      "fix": {
        "prompt": "Replace all <placeholder> patterns.\n\nStrategy:\n- Technical fields: Replace with 'To be determined based on project requirements'\n- In sentences: Remove and rephrase grammatically\n- Placeholder-only lines: Replace with 'Details to be specified during implementation'\n\nCONTENT:\n{content}\n\nReturn ONLY the cleaned content.",
        "returnFormat": "text",
        "maxTokens": 8192
      },
      "metadata": {
        "category": "content",
        "addedVersion": "0.1.2"
      }
    },
    {
      "id": "fix-section-9-main-title",
      "name": "Fix Section 9 Main Title",
      "enabled": true,
      "severity": "minor",
      "description": "Ensure section 9 main header is '## 9. Success Metrics'",
      "check": {
        "prompt": "Check if section 9's MAIN HEADER (## 9. ...) is titled 'Success Metrics'.\n\nCorrect: ## 9. Success Metrics\nWrong: ## 9. Success Criteria, ## 9. Acceptance Criteria, ## 9. Definition of Done\n\nCONTENT:\n{content}\n\nIs section 9's main title WRONG?\n\nRespond ONLY 'YES' or 'NO'.",
        "expectedResponse": "YES|NO",
        "maxTokens": 10
      },
      "fix": {
        "prompt": "Change section 9's main header to '## 9. Success Metrics'.\n\nONLY change the main ## 9. header.\nDo NOT modify subsections (### headers).\nPreserve all content and formatting.\n\nCONTENT:\n{content}\n\nReturn ONLY the corrected content.",
        "returnFormat": "text",
        "maxTokens": 8192
      },
      "metadata": {
        "category": "structure",
        "addedVersion": "0.1.2"
      }
    },
    {
      "id": "fix-section-9-subsections",
      "name": "Fix Section 9 Subsection Names",
      "enabled": true,
      "severity": "minor",
      "description": "Ensure section 9 has correct subsection names",
      "check": {
        "prompt": "Check if section 9 has the correct subsection structure:\n- ### Key Outcomes\n- ### Technical Goals\n- ### User Experience Goals\n\nWrong names: 'Acceptance Criteria', 'Definition of Done'\n\nCONTENT:\n{content}\n\nDoes section 9 have WRONG or MISSING subsections?\n\nRespond ONLY 'YES' or 'NO'.",
        "expectedResponse": "YES|NO",
        "maxTokens": 10
      },
      "fix": {
        "prompt": "Fix section 9 subsections:\n\n1. Rename 'Acceptance Criteria' ‚Üí 'Key Outcomes'\n2. Rename 'Definition of Done' ‚Üí 'Technical Goals'\n3. Add '### User Experience Goals' if missing\n\nKeep all content under each subsection.\nONLY modify subsections in section 9.\n\nCONTENT:\n{content}\n\nReturn ONLY the corrected content.",
        "returnFormat": "text",
        "maxTokens": 8192
      },
      "metadata": {
        "category": "structure",
        "addedVersion": "0.1.2"
      }
    },
    {
      "id": "validate-header-hierarchy",
      "name": "Fix Header Hierarchy",
      "enabled": true,
      "severity": "major",
      "description": "Fix skipped header levels (e.g., ## followed by ####)",
      "check": {
        "prompt": "Check for skipped header levels.\n\nProper hierarchy: # ‚Üí ## ‚Üí ### ‚Üí ####\nInvalid: ## followed directly by #### (skips ###)\n\nCONTENT:\n{content}\n\nAre there ANY skipped header levels?\n\nRespond ONLY 'YES' or 'NO'.",
        "expectedResponse": "YES|NO",
        "maxTokens": 10
      },
      "fix": {
        "prompt": "Fix header hierarchy by adjusting levels.\n\nEnsure proper nesting: # ‚Üí ## ‚Üí ### ‚Üí ####\nNo skipped levels.\n\nStrategy:\n- Promote headers if needed (#### ‚Üí ###)\n- Insert intermediate levels if needed\n- Adjust child headers if parent changes\n\nCONTENT:\n{content}\n\nReturn ONLY the corrected content.",
        "returnFormat": "text",
        "maxTokens": 8192
      },
      "metadata": {
        "category": "structure",
        "addedVersion": "0.1.2"
      }
    },
    {
      "id": "remove-empty-sections",
      "name": "Fill Empty Sections",
      "enabled": true,
      "severity": "minor",
      "description": "Add placeholder text to empty sections",
      "check": {
        "prompt": "Check if document has empty sections (headers with no content under them).\n\nEmpty section: header followed immediately by another header or end of file.\n\nCONTENT:\n{content}\n\nAre there ANY empty sections?\n\nRespond ONLY 'YES' or 'NO'.",
        "expectedResponse": "YES|NO",
        "maxTokens": 10
      },
      "fix": {
        "prompt": "Add placeholder text to ALL empty sections.\n\nFor each empty section, add: 'To be determined'\n\nDo NOT remove sections.\nPreserve all non-empty sections.\n\nCONTENT:\n{content}\n\nReturn ONLY the corrected content.",
        "returnFormat": "text",
        "maxTokens": 8192
      },
      "metadata": {
        "category": "content",
        "addedVersion": "0.1.2"
      }
    },
    {
      "id": "no-meta-commentary",
      "name": "Remove Meta-Commentary",
      "enabled": true,
      "severity": "major",
      "description": "Remove document self-references like 'As mentioned above'",
      "check": {
        "prompt": "Check for meta-commentary phrases:\n- 'As mentioned above'\n- 'As discussed earlier'\n- 'In the next section'\n- 'See below'\n- 'The following section covers'\n\nCONTENT:\n{content}\n\nDoes this contain meta-commentary?\n\nRespond ONLY 'YES' or 'NO'.",
        "expectedResponse": "YES|NO",
        "maxTokens": 10
      },
      "fix": {
        "prompt": "Remove or rephrase ALL meta-commentary.\n\nStrategy:\n- Remove the phrase\n- Rephrase sentence to be direct and self-contained\n- Rewrite if removing makes it unclear\n\nExample:\n'As mentioned above, the system uses React.'\n‚Üí 'The system uses React.'\n\nCONTENT:\n{content}\n\nReturn ONLY the corrected content.",
        "returnFormat": "text",
        "maxTokens": 8192
      },
      "metadata": {
        "category": "content",
        "addedVersion": "0.1.2"
      }
    },
    {
      "id": "no-emojis",
      "name": "Remove Emojis",
      "enabled": true,
      "severity": "minor",
      "description": "Remove emoji characters from documentation",
      "check": {
        "prompt": "Check for emoji characters: üöÄ ‚úÖ ‚ùå üìã üéØ üí° etc.\n\nCONTENT:\n{content}\n\nDoes this contain emojis?\n\nRespond ONLY 'YES' or 'NO'.",
        "expectedResponse": "YES|NO",
        "maxTokens": 10
      },
      "fix": {
        "prompt": "Remove ALL emoji characters.\n\nRules:\n- Remove emoji and space if at start of line ('‚úÖ Item' ‚Üí 'Item')\n- Remove emoji inline but preserve sentence structure\n- Do NOT modify emoji shortcodes like ':smile:'\n\nCONTENT:\n{content}\n\nReturn ONLY the cleaned content.",
        "returnFormat": "text",
        "maxTokens": 8192
      },
      "metadata": {
        "category": "formatting",
        "addedVersion": "0.1.2"
      }
    }
  ]
}
