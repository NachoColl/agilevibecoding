import{_ as e,c as i,o as t,ag as n,j as a}from"./chunks/framework.z0p7P-Mv.js";const k=JSON.parse('{"title":"Project Expansion Ceremony","description":"","frontmatter":{},"headers":[],"relativePath":"ceremonies/project-expansion.md","filePath":"ceremonies/project-expansion.md"}'),p={name:"ceremonies/project-expansion.md"};function l(r,s,o,c,d,h){return t(),i("div",null,[...s[0]||(s[0]=[n('<h1 id="project-expansion-ceremony" tabindex="-1">Project Expansion Ceremony <a class="header-anchor" href="#project-expansion-ceremony" aria-label="Permalink to &quot;Project Expansion Ceremony&quot;">‚Äã</a></h1><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">‚Äã</a></h2><p>The <strong>Project Expansion</strong> ceremony creates or expands the project&#39;s Epic and Story hierarchy with intelligent duplicate detection. It decomposes project scope into domain-based Epics (3-7) and user-facing Stories (2-8 per Epic) with proper context inheritance.</p><p><strong>Purpose:</strong> Create domain-based Epics and user-facing Stories with duplicate detection to support incremental project growth.</p><p><strong>Output:</strong> Epic and Story directories with doc.md, context.md, and work.json files.</p><p><strong>Duration:</strong> 5-15 minutes (depending on scope size)</p><hr><h2 id="prerequisites" tabindex="-1">Prerequisites <a class="header-anchor" href="#prerequisites" aria-label="Permalink to &quot;Prerequisites&quot;">‚Äã</a></h2><p>Before running Project Expansion:</p><ol><li><p><strong>Sponsor Call completed:</strong></p><ul><li><code>.avc/project/project/doc.md</code> exists (for INITIAL_SCOPE)</li><li><code>.avc/project/project/context.md</code> exists (for context inheritance)</li></ul></li><li><p><strong>LLM provider configured:</strong></p><ul><li>API key in <code>.env</code> file (ANTHROPIC_API_KEY or GEMINI_API_KEY)</li><li>Provider set in <code>.avc/avc.json</code></li></ul></li></ol><hr><h2 id="how-it-works-workflow" tabindex="-1">How It Works - Workflow <a class="header-anchor" href="#how-it-works-workflow" aria-label="Permalink to &quot;How It Works - Workflow&quot;">‚Äã</a></h2>',12),a("figure",{class:"vpd-diagram vpd-diagram--mermaid",onclick:`
        const figure = this;
        const isFullscreen = figure.classList.contains('vpd-diagram--fullscreen');

        document.querySelectorAll('.vpd-diagram').forEach(diagram => {
          diagram.classList.remove('vpd-diagram--fullscreen');
        });

        if (!isFullscreen) {
          figure.classList.add('vpd-diagram--fullscreen');
        }
      `},[a("img",{src:"/diagrams/mermaid-project-expansion-65-be04bee43c08b009333bc284dd38086b.svg",alt:"mermaid Diagram",class:"vpd-diagram-image"})],-1),n(`<hr><h2 id="processing-steps" tabindex="-1">Processing Steps <a class="header-anchor" href="#processing-steps" aria-label="Permalink to &quot;Processing Steps&quot;">‚Äã</a></h2><h3 id="step-1-validate-prerequisites" tabindex="-1">Step 1: Validate Prerequisites <a class="header-anchor" href="#step-1-validate-prerequisites" aria-label="Permalink to &quot;Step 1: Validate Prerequisites&quot;">‚Äã</a></h3><p>Checks that project foundation exists:</p><ul><li><code>.avc/project/project/doc.md</code> (for INITIAL_SCOPE extraction)</li><li><code>.avc/project/project/context.md</code> (for context inheritance)</li></ul><p><strong>Error Handling:</strong></p><ul><li>If missing ‚Üí Error: &quot;Please run /sponsor-call first&quot;</li></ul><h3 id="step-2-read-existing-hierarchy" tabindex="-1">Step 2: Read Existing Hierarchy <a class="header-anchor" href="#step-2-read-existing-hierarchy" aria-label="Permalink to &quot;Step 2: Read Existing Hierarchy&quot;">‚Äã</a></h3><p>Scans <code>.avc/project/</code> for existing Epic and Story directories:</p><ul><li>Builds map of existing Epic names (case-insensitive)</li><li>Builds map of existing Story names (case-insensitive)</li><li>Tracks max Epic number (e.g., context-0003 ‚Üí 3)</li><li>Tracks max Story number per Epic (e.g., context-0001-0005 ‚Üí 5)</li></ul><p><strong>Purpose:</strong> Enable duplicate detection and ID renumbering.</p><h3 id="step-3-collect-scope" tabindex="-1">Step 3: Collect Scope <a class="header-anchor" href="#step-3-collect-scope" aria-label="Permalink to &quot;Step 3: Collect Scope&quot;">‚Äã</a></h3><p>Reads INITIAL_SCOPE section from <code>.avc/project/project/doc.md</code>:</p><ul><li>Extracts features list from &quot;## Initial Scope&quot; section</li><li>Future enhancement: Prompt user for additional features to add</li></ul><h3 id="step-4-decompose-into-epics-stories" tabindex="-1">Step 4: Decompose into Epics/Stories <a class="header-anchor" href="#step-4-decompose-into-epics-stories" aria-label="Permalink to &quot;Step 4: Decompose into Epics/Stories&quot;">‚Äã</a></h3><p>Uses <code>epic-story-decomposer</code> agent to create hierarchy:</p><p><strong>Input:</strong></p><ul><li>INITIAL_SCOPE (from doc.md)</li><li>Project context.md content</li><li>List of existing Epic names (for duplicate detection)</li><li>List of existing Story names (for duplicate detection)</li></ul><p><strong>Output:</strong></p><ul><li>JSON with 3-7 new Epics</li><li>Each Epic contains 2-8 new Stories</li><li>Skips any Epics/Stories matching existing names</li></ul><p><strong>Agent Instruction:</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Existing Epics: user management, payment processing</span></span>
<span class="line"><span>Existing Stories: user registration, login, checkout</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Generate NEW Epics and Stories. Do not duplicate existing ones.</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="step-5-duplicate-detection" tabindex="-1">Step 5: Duplicate Detection <a class="header-anchor" href="#step-5-duplicate-detection" aria-label="Permalink to &quot;Step 5: Duplicate Detection&quot;">‚Äã</a></h3><p>Validates generated Epics/Stories against existing hierarchy:</p><ul><li><strong>Case-insensitive name matching</strong></li><li>Skips duplicates automatically (agent-level)</li><li>Logs warning if collision detected</li></ul><p><strong>Example:</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Existing: &quot;User Management&quot; (context-0001)</span></span>
<span class="line"><span>New:      &quot;user management&quot; ‚Üí SKIPPED (duplicate)</span></span>
<span class="line"><span>New:      &quot;Payment Processing&quot; ‚Üí CREATED (context-0002)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="step-6-renumber-ids" tabindex="-1">Step 6: Renumber IDs <a class="header-anchor" href="#step-6-renumber-ids" aria-label="Permalink to &quot;Step 6: Renumber IDs&quot;">‚Äã</a></h3><p>Assigns IDs to avoid collisions:</p><ul><li><strong>Epics:</strong> Start at maxEpicNum + 1</li><li><strong>Stories:</strong> Start at maxStoryNum[epicId] + 1 per Epic</li></ul><p><strong>Example:</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Existing:</span></span>
<span class="line"><span>- context-0001 (Epic 1)</span></span>
<span class="line"><span>- context-0001-0001 (Story 1)</span></span>
<span class="line"><span>- context-0001-0002 (Story 2)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>New allocation:</span></span>
<span class="line"><span>- context-0002 (Epic 2) ‚Üê maxEpicNum (1) + 1</span></span>
<span class="line"><span>- context-0002-0001 (Story 1)</span></span>
<span class="line"><span>- context-0002-0002 (Story 2)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="step-7-generate-epic-contexts" tabindex="-1">Step 7: Generate Epic Contexts <a class="header-anchor" href="#step-7-generate-epic-contexts" aria-label="Permalink to &quot;Step 7: Generate Epic Contexts&quot;">‚Äã</a></h3><p>For each NEW Epic, generates context.md using <code>feature-context-generator</code> agent:</p><p><strong>Input:</strong></p><ul><li>Project context.md</li><li>Epic details (name, domain, description, features)</li></ul><p><strong>Output:</strong></p><ul><li>Epic context.md (~800 tokens)</li><li>Focus: Domain-specific concerns, bounded context boundaries, Epic-level patterns</li></ul><p><strong>Inheritance:</strong></p><ul><li>Epic contexts inherit from project context</li><li>Epic contexts are passed down to Stories</li></ul><h3 id="step-8-generate-story-contexts" tabindex="-1">Step 8: Generate Story Contexts <a class="header-anchor" href="#step-8-generate-story-contexts" aria-label="Permalink to &quot;Step 8: Generate Story Contexts&quot;">‚Äã</a></h3><p>For each NEW Story, generates context.md using <code>feature-context-generator</code> agent:</p><p><strong>Input:</strong></p><ul><li>Project context.md</li><li>Epic context.md (parent)</li><li>Story details (name, description, userType, acceptance criteria)</li></ul><p><strong>Output:</strong></p><ul><li>Story context.md (~1500 tokens)</li><li>Focus: User journey, acceptance criteria details, Story-level patterns</li></ul><p><strong>Inheritance:</strong></p><ul><li>Story contexts inherit from Epic and Project contexts</li><li>Story contexts are passed down to Tasks (created by Seed ceremony)</li></ul><h3 id="step-9-write-files" tabindex="-1">Step 9: Write Files <a class="header-anchor" href="#step-9-write-files" aria-label="Permalink to &quot;Step 9: Write Files&quot;">‚Äã</a></h3><p>Creates directory structure with 3 files per work item:</p><p><strong>Epic Files:</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>.avc/project/context-0001/</span></span>
<span class="line"><span>‚îú‚îÄ‚îÄ doc.md         # Stub (updated during retrospective)</span></span>
<span class="line"><span>‚îú‚îÄ‚îÄ context.md     # Epic context (~800 tokens)</span></span>
<span class="line"><span>‚îî‚îÄ‚îÄ work.json      # Epic metadata</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>Story Files:</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>.avc/project/context-0001-0001/</span></span>
<span class="line"><span>‚îú‚îÄ‚îÄ doc.md         # Stub (updated during retrospective)</span></span>
<span class="line"><span>‚îú‚îÄ‚îÄ context.md     # Story context (~1500 tokens)</span></span>
<span class="line"><span>‚îî‚îÄ‚îÄ work.json      # Story metadata with children: []</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><hr><h2 id="ai-agents-used" tabindex="-1">AI Agents Used <a class="header-anchor" href="#ai-agents-used" aria-label="Permalink to &quot;AI Agents Used&quot;">‚Äã</a></h2><p>The Project Expansion ceremony uses <strong>2 specialized AI agents</strong>:</p><h3 id="_1-epic-story-decomposer" tabindex="-1">1. Epic/Story Decomposer <a class="header-anchor" href="#_1-epic-story-decomposer" aria-label="Permalink to &quot;1. Epic/Story Decomposer&quot;">‚Äã</a></h3><ul><li><strong>File:</strong> <code>agents/epic-story-decomposer.md</code></li><li><strong>Purpose:</strong> Decompose project scope into Epics and Stories with duplicate detection</li><li><strong>Input:</strong> Project context + INITIAL_SCOPE + existing Epic/Story names</li><li><strong>Output:</strong> JSON with Epic/Story hierarchy (3-7 Epics, 2-8 Stories per Epic)</li><li><strong>Duplicate Handling:</strong> Skips Epics/Stories matching existing names (case-insensitive)</li><li><strong>Validation:</strong> Ensures 3-7 Epics, 2-8 Stories per Epic</li></ul><h3 id="_2-feature-context-generator" tabindex="-1">2. Feature Context Generator <a class="header-anchor" href="#_2-feature-context-generator" aria-label="Permalink to &quot;2. Feature Context Generator&quot;">‚Äã</a></h3><ul><li><strong>File:</strong> <code>agents/feature-context-generator.md</code></li><li><strong>Purpose:</strong> Generate context.md files for Epics and Stories</li><li><strong>Input (Epic level):</strong> Project context + Epic details</li><li><strong>Output (Epic level):</strong> Epic context.md (~800 tokens)</li><li><strong>Input (Story level):</strong> Project context + Epic context + Story details</li><li><strong>Output (Story level):</strong> Story context.md (~1500 tokens)</li><li><strong>Token Budgets:</strong> Epic ~800, Story ~1500</li></ul><hr><h2 id="metadata-files-work-json" tabindex="-1">Metadata Files (work.json) <a class="header-anchor" href="#metadata-files-work-json" aria-label="Permalink to &quot;Metadata Files (work.json)&quot;">‚Äã</a></h2><h3 id="epic-work-json-structure" tabindex="-1">Epic work.json Structure <a class="header-anchor" href="#epic-work-json-structure" aria-label="Permalink to &quot;Epic work.json Structure&quot;">‚Äã</a></h3><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;context-0001&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Epic Name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;epic&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;domain&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;domain-name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;description&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Epic description&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;features&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;feature1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;feature2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;status&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;planned&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;dependencies&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;children&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;context-0001-0001&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;context-0001-0002&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;metadata&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;created&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2025-01-15T10:30:00.000Z&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;ceremony&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;project-expansion&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;tokenBudget&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">800</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="story-work-json-structure" tabindex="-1">Story work.json Structure <a class="header-anchor" href="#story-work-json-structure" aria-label="Permalink to &quot;Story work.json Structure&quot;">‚Äã</a></h3><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;context-0001-0001&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Story Name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;story&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;userType&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;end-user&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;description&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Story description&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;acceptance&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;criterion 1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;criterion 2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;status&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;planned&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;dependencies&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;children&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [],  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Empty until /seed creates tasks</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;metadata&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;created&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2025-01-15T10:30:00.000Z&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;ceremony&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;project-expansion&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;tokenBudget&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1500</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><hr><h2 id="usage" tabindex="-1">Usage <a class="header-anchor" href="#usage" aria-label="Permalink to &quot;Usage&quot;">‚Äã</a></h2><h3 id="first-expansion-after-sponsor-call" tabindex="-1">First Expansion (After Sponsor Call) <a class="header-anchor" href="#first-expansion-after-sponsor-call" aria-label="Permalink to &quot;First Expansion (After Sponsor Call)&quot;">‚Äã</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">avc</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /project-expansion</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Uses INITIAL_SCOPE from project doc.md to create initial Epics/Stories.</p><p><strong>Example Output:</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>üìä Project Expansion Ceremony</span></span>
<span class="line"><span></span></span>
<span class="line"><span>üìã Analyzing existing project structure...</span></span>
<span class="line"><span></span></span>
<span class="line"><span>No existing Epics/Stories found (first expansion)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>üîÑ Stage 1/3: Decomposing scope into Epics and Stories...</span></span>
<span class="line"><span></span></span>
<span class="line"><span>‚úÖ Generated 4 new Epics with 18 new Stories</span></span>
<span class="line"><span></span></span>
<span class="line"><span>üìù Stage 2/3: Generating context files...</span></span>
<span class="line"><span></span></span>
<span class="line"><span>   ‚úÖ context-0001/doc.md</span></span>
<span class="line"><span>   ‚úÖ context-0001/context.md</span></span>
<span class="line"><span>   ‚úÖ context-0001/work.json</span></span>
<span class="line"><span>      ‚úÖ context-0001-0001/doc.md</span></span>
<span class="line"><span>      ‚úÖ context-0001-0001/context.md</span></span>
<span class="line"><span>      ‚úÖ context-0001-0001/work.json</span></span>
<span class="line"><span>      ...</span></span>
<span class="line"><span></span></span>
<span class="line"><span>üíæ Stage 3/3: Writing hierarchy files...</span></span>
<span class="line"><span></span></span>
<span class="line"><span>‚úÖ Project hierarchy expanded!</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Created:</span></span>
<span class="line"><span>   ‚Ä¢ 4 new Epics</span></span>
<span class="line"><span>   ‚Ä¢ 18 new Stories</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Total project structure:</span></span>
<span class="line"><span>   ‚Ä¢ 4 Epics</span></span>
<span class="line"><span>   ‚Ä¢ 18 Stories</span></span>
<span class="line"><span>   ‚Ä¢ 0 Tasks (run /seed to create tasks for stories)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>üìä Token Usage:</span></span>
<span class="line"><span>   Input: 12,450 tokens</span></span>
<span class="line"><span>   Output: 8,320 tokens</span></span>
<span class="line"><span>   Total: 20,770 tokens</span></span>
<span class="line"><span>   API Calls: 23</span></span>
<span class="line"><span></span></span>
<span class="line"><span>‚úÖ Token history updated</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Next steps:</span></span>
<span class="line"><span>   1. Review Epic/Story structure in .avc/project/</span></span>
<span class="line"><span>   2. Run /seed &lt;story-id&gt; to decompose a Story into Tasks/Subtasks</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><h3 id="subsequent-expansions-add-more-features" tabindex="-1">Subsequent Expansions (Add More Features) <a class="header-anchor" href="#subsequent-expansions-add-more-features" aria-label="Permalink to &quot;Subsequent Expansions (Add More Features)&quot;">‚Äã</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /project-expansion</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>Behavior:</strong></p><ul><li>Reads existing Epics/Stories</li><li>Passes existing names to agent for duplicate detection</li><li>Agent generates ONLY new Epics/Stories</li><li>IDs are renumbered to avoid collisions</li></ul><p><strong>Example Output:</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>üìã Analyzing existing project structure...</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Found 4 existing Epics, 18 existing Stories</span></span>
<span class="line"><span></span></span>
<span class="line"><span>üîÑ Stage 1/3: Decomposing scope into Epics and Stories...</span></span>
<span class="line"><span></span></span>
<span class="line"><span>‚úÖ Generated 1 new Epic with 3 new Stories</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Created:</span></span>
<span class="line"><span>   ‚Ä¢ 1 new Epic</span></span>
<span class="line"><span>   ‚Ä¢ 3 new Stories</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Total project structure:</span></span>
<span class="line"><span>   ‚Ä¢ 5 Epics</span></span>
<span class="line"><span>   ‚Ä¢ 21 Stories</span></span>
<span class="line"><span>   ‚Ä¢ 0 Tasks</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><hr><h2 id="duplicate-detection-algorithm" tabindex="-1">Duplicate Detection Algorithm <a class="header-anchor" href="#duplicate-detection-algorithm" aria-label="Permalink to &quot;Duplicate Detection Algorithm&quot;">‚Äã</a></h2><h3 id="how-it-works" tabindex="-1">How It Works <a class="header-anchor" href="#how-it-works" aria-label="Permalink to &quot;How It Works&quot;">‚Äã</a></h3><ol><li><p><strong>Build Existing Maps</strong> (Step 2):</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> existingEpics</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &quot;user management&quot; -&gt; &quot;context-0001&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> existingStories</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &quot;user registration&quot; -&gt; &quot;context-0001-0001&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li><li><p><strong>Pass to Agent</strong> (Step 4):</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Existing Epics: user management, payment processing</span></span>
<span class="line"><span>Existing Stories: user registration, login, checkout</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Generate NEW Epics and Stories. Skip existing ones.</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li><li><p><strong>Agent Skips Duplicates</strong>:</p><ul><li>Case-insensitive matching</li><li>&quot;User Management&quot; matches &quot;user management&quot; ‚Üí SKIP</li><li>&quot;Analytics Dashboard&quot; doesn&#39;t match ‚Üí CREATE</li></ul></li><li><p><strong>ID Renumbering</strong> (Step 6):</p><ul><li>New Epics: context-0005, context-0006, ...</li><li>New Stories: context-0005-0001, context-0005-0002, ...</li></ul></li></ol><h3 id="why-duplicate-detection" tabindex="-1">Why Duplicate Detection? <a class="header-anchor" href="#why-duplicate-detection" aria-label="Permalink to &quot;Why Duplicate Detection?&quot;">‚Äã</a></h3><p><strong>Problem:</strong> Without duplicate detection, re-running <code>/project-expansion</code> would create:</p><ul><li>&quot;User Management&quot; (context-0001) - original</li><li>&quot;User Management&quot; (context-0005) - duplicate!</li></ul><p><strong>Solution:</strong> Agent checks existing names and skips duplicates, enabling:</p><ul><li>Safe re-runs of ceremony</li><li>Incremental project growth</li><li>Adding features without recreating existing structure</li></ul><hr><h2 id="error-handling" tabindex="-1">Error Handling <a class="header-anchor" href="#error-handling" aria-label="Permalink to &quot;Error Handling&quot;">‚Äã</a></h2><h3 id="missing-prerequisites" tabindex="-1">Missing Prerequisites <a class="header-anchor" href="#missing-prerequisites" aria-label="Permalink to &quot;Missing Prerequisites&quot;">‚Äã</a></h3><p><strong>Error:</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>‚ùå Project expansion failed: Project context not found.</span></span>
<span class="line"><span>   Please run /sponsor-call first to create the project foundation.</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>Solution:</strong> Run <code>/sponsor-call</code> first</p><h3 id="invalid-scope-format" tabindex="-1">Invalid Scope Format <a class="header-anchor" href="#invalid-scope-format" aria-label="Permalink to &quot;Invalid Scope Format&quot;">‚Äã</a></h3><p><strong>Error:</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>‚ùå Project expansion failed: Could not find Initial Scope section in project documentation</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>Solution:</strong> Verify <code>.avc/project/project/doc.md</code> has &quot;## Initial Scope&quot; section</p><h3 id="llm-provider-errors" tabindex="-1">LLM Provider Errors <a class="header-anchor" href="#llm-provider-errors" aria-label="Permalink to &quot;LLM Provider Errors&quot;">‚Äã</a></h3><p><strong>Error:</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>‚ö†Ô∏è  Retry 1/3 in 2s: Epic/Story decomposition</span></span>
<span class="line"><span>   Error: rate limit exceeded</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>Behavior:</strong> Automatic retry with exponential backoff (3 attempts)</p><hr><h2 id="next-steps" tabindex="-1">Next Steps <a class="header-anchor" href="#next-steps" aria-label="Permalink to &quot;Next Steps&quot;">‚Äã</a></h2><p>After Project Expansion completes:</p><ol><li><p><strong>Review Epic/Story Structure:</strong></p><ul><li>Check <code>.avc/project/context-*/</code> directories</li><li>Read Epic/Story context.md files</li><li>Validate Epic domains and Story acceptance criteria</li></ul></li><li><p><strong>Decompose Stories into Tasks:</strong></p><ul><li>Run <code>/seed &lt;story-id&gt;</code> for each Story</li><li>Example: <code>/seed context-0001-0001</code></li><li>Creates Tasks and Subtasks for implementation</li></ul></li><li><p><strong>Expand Again (Optional):</strong></p><ul><li>Modify <code>.avc/project/project/doc.md</code> to add new features</li><li>Run <code>/project-expansion</code> again</li><li>Duplicate detection ensures no collisions</li></ul></li></ol><hr><h2 id="tips" tabindex="-1">Tips <a class="header-anchor" href="#tips" aria-label="Permalink to &quot;Tips&quot;">‚Äã</a></h2><ul><li><strong>Start Small:</strong> Run Sponsor Call with focused scope, then expand incrementally</li><li><strong>Review Before Seeding:</strong> Check Epic/Story structure before creating Tasks</li><li><strong>Incremental Growth:</strong> Add features over time by re-running ceremony</li><li><strong>Context Inheritance:</strong> Epic contexts flow down to Stories, which flow down to Tasks</li></ul>`,110)])])}const g=e(p,[["render",l]]);export{k as __pageData,g as default};
